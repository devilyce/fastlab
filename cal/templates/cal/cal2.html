<h2>Person Form</h2>

<form method="post" id="personForm" novalidate>
    {% csrf_token %}
    <table>
        <tbody>
        <tr>
            <th><label for="id_name">Name:</label></th>
            <td><input type="text" name="name" maxlength="100" required="" id="id_name"></td>
        </tr>
        <tr>
            <th><label for="id_year">Year:</label></th>
            <td><input type="text" name="year" maxlength="100" id="id_year"></td>
        </tr>
        <tr>
            <th><label for="id_month">Month:</label></th>
            <td><input type="text" name="month" maxlength="100" id="id_month"></td>
        </tr>
        </tbody>
    </table>
    <button type="submit">Save</button>
    <a href="">Nevermind</a>
</form>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
        const yearInput = document.getElementById('id_year')

        $.ajax({
            type: 'GET',
            url: 'year-json',
            success: function(response){
                console.log(response.data)
                const yearData = response.data

                yearData.map(item=>{
                    const option = document.createElement('div')
                    option.textContent = item.name
                    option.setAttribute('class', 'item')
                    option.setAttribute('data-value', item.name)
                    yearInput.appendChild(option)

                })
            },
            error: function(error){
                console.log(error)
            }
        })

</script>